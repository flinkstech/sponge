arch: x86_64
environment:
  PROJECT_DIR: '~/go/src/git.sr.ht/~tslocum'
  PROJECT_NAME: 'sponge'
  CGO_ENABLED: '0'
  GO111MODULE: 'on'
image: alpine/edge
packages:
  - go
sources:
  - https://git.sr.ht/~tslocum/sponge
tasks:
  - setup: |
      mkdir -p $PROJECT_DIR
      mv $PROJECT_NAME $PROJECT_DIR/$PROJECT_NAME
  - test: |
      cd $PROJECT_DIR/$PROJECT_NAME
      go test
  - build: |
      cd $PROJECT_DIR/$PROJECT_NAME
      go build
